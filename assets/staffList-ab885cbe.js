import{G as _,a3 as N,o as P,k as B,m as t,a5 as r,L as e,v as o,l as D,H as M,a6 as T,a7 as A,t as h}from"./index-f963a964.js";import{E as O}from"./el-dialog-e37cfe82.js";/* empty css                        */import{E as w,a as b}from"./el-message-c1f6612d.js";import{m as $,e as F,a as J}from"./merchant-b27dae52.js";import{E as j,a as G,b as H,c as I,d as q}from"./index-5f625b61.js";import"./index-46385dca.js";const K={class:"warp"},Q={class:"search-tool"},R={class:"search-item"},W={class:"search-item"},X={class:"search-item"},Y={class:"search-item"},Z={class:"add-row"},ee={class:"table-box"},ae=["src"],le={class:"pager"},te={class:"edit-row"},se=t("div",{class:"edit-label"},"名字：",-1),oe={class:"edit-row"},ie=t("div",{class:"edit-label"},"简介：",-1),ne={class:"edit-row"},de=t("div",{class:"edit-label"},"联系电话：",-1),ue={class:"edit-row"},re=t("div",{class:"edit-label"},"工作年限：",-1),me={class:"edit-row"},pe=t("div",{class:"edit-label"},"人员工种：",-1),ce={class:"edit-row"},ve=t("div",{class:"edit-label"},"人员状态：",-1),_e={class:"dialog-footer"},Ue={__name:"staffList",setup(ge){const m=_(!1),s=_({}),f=_([{}]);let V=_(1);const i=_({mchid:"",type:"",status:"",page:1,pagenumber:10,start_time:"",end_time:""});N(()=>{p()});const y=()=>{s.value={},m.value=!0},E=async()=>{w.service();let n;s.value.id?n=await F(s.value):n=await J(s.value),n.code===200?(b({message:"操作成功！",type:"success"}),p(),m.value=!1):b({message:n.msg,type:"error"})},k=n=>{s.value=JSON.parse(JSON.stringify(n)),console.log(n.id,s.value),m.value=!0},U=n=>{i.value.pagenumber=n,i.value.page=1,p()},C=n=>{i.value.page=n,p()},x=()=>{i.value.page=1,p()},p=async()=>{const n=w.service(),l=await $(i.value);n.close(),l.code===200?(f.value=l.data.list,V.value=+l.data.count):b({message:l.msg,type:"error"})};return(n,l)=>{const c=T,d=I,g=j,v=A,u=q,z=G,L=H,S=O;return P(),B(M,null,[t("div",K,[t("div",Q,[t("div",R,[r(" 人员名字： "),e(c,{class:"search-ipt",modelValue:i.value.mchid,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value.mchid=a)},null,8,["modelValue"])]),t("div",W,[r(" 人员工种： "),e(g,{modelValue:i.value.type,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value.type=a)},{default:o(()=>[e(d,{label:"全部",value:""}),e(d,{label:"设计师",value:"1"}),e(d,{label:"作业员",value:"1"})]),_:1},8,["modelValue"])]),t("div",X,[r(" 人员状态： "),e(g,{modelValue:i.value.status,"onUpdate:modelValue":l[2]||(l[2]=a=>i.value.status=a)},{default:o(()=>[e(d,{label:"全部",value:""}),e(d,{label:"在职",value:"10"}),e(d,{label:"离职",value:"9"})]),_:1},8,["modelValue"])]),t("div",Y,[e(v,{type:"primary",onClick:x},{default:o(()=>[r("搜索")]),_:1})])]),t("div",Z,[e(v,{type:"success",onClick:y},{default:o(()=>[r("新增")]),_:1})]),t("div",ee,[e(z,{data:f.value,class:"table",stripe:"","show-overflow-tooltip":"",size:"large"},{default:o(()=>[e(u,{label:"头像","min-width":"100",prop:"mchid"},{default:o(a=>[t("img",{src:a.row.avatar,alt:""},null,8,ae)]),_:1}),e(u,{label:"姓名","min-width":"100",prop:"username"}),e(u,{label:"联系方式","min-width":"150",prop:"mchkey"}),e(u,{label:"工作年限","min-width":"100",prop:"mchkey"}),e(u,{label:"简介","min-width":"150",prop:"mchkey"}),e(u,{label:"人员工种","min-width":"80"},{default:o(a=>[t("span",null,h(a.row.type==1?"1":"2"),1)]),_:1}),e(u,{label:"人员状态","min-width":"80"},{default:o(a=>[t("span",null,h(a.row.status==9?"在职":"离职"),1)]),_:1}),e(u,{label:"操作","min-width":"100"},{default:o(a=>[e(v,{type:"primary",plain:"",onClick:be=>k(a.row)},{default:o(()=>[r("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t("div",le,[e(L,{"current-page":i.value.page,"onUpdate:currentPage":l[3]||(l[3]=a=>i.value.page=a),"page-size":i.value.pagenumber,"onUpdate:pageSize":l[4]||(l[4]=a=>i.value.pagenumber=a),"page-sizes":[10,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:D(V),onSizeChange:U,onCurrentChange:C},null,8,["current-page","page-size","total"])])]),e(S,{modelValue:m.value,"onUpdate:modelValue":l[12]||(l[12]=a=>m.value=a),width:"500px",title:s.value.id?`人员：${s.value.username}`:"添加"},{footer:o(()=>[t("span",_e,[e(v,{onClick:l[11]||(l[11]=a=>m.value=!1)},{default:o(()=>[r("取消")]),_:1}),e(v,{type:"primary",onClick:E},{default:o(()=>[r(" 确定 ")]),_:1})])]),default:o(()=>[t("div",te,[se,e(c,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":l[5]||(l[5]=a=>s.value.username=a)},null,8,["modelValue"])]),t("div",oe,[ie,e(c,{type:"textarea",class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":l[6]||(l[6]=a=>s.value.username=a)},null,8,["modelValue"])]),t("div",ne,[de,e(c,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":l[7]||(l[7]=a=>s.value.username=a)},null,8,["modelValue"])]),t("div",ue,[re,e(c,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":l[8]||(l[8]=a=>s.value.username=a)},null,8,["modelValue"])]),t("div",me,[pe,e(g,{class:"edit-input",modelValue:s.value.type,"onUpdate:modelValue":l[9]||(l[9]=a=>s.value.type=a)},{default:o(()=>[e(d,{label:"设计师",value:"2"}),e(d,{label:"作业员",value:"1"})]),_:1},8,["modelValue"])]),t("div",ce,[ve,e(g,{class:"edit-input",modelValue:s.value.status,"onUpdate:modelValue":l[10]||(l[10]=a=>s.value.status=a)},{default:o(()=>[e(d,{label:"在职",value:"10"}),e(d,{label:"离职",value:"9"})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])],64)}}};export{Ue as default};
