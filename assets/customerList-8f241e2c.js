import{G as v,a3 as N,o as P,k as B,m as t,a5 as d,L as a,v as s,l as D,H as M,a6 as T,a7 as A,t as p}from"./index-f963a964.js";import{E as O}from"./el-dialog-e37cfe82.js";/* empty css                        */import{E as y,a as f}from"./el-message-c1f6612d.js";import{m as $,e as F,a as J}from"./merchant-b27dae52.js";import{E as j,a as G,b as H,c as I,d as q}from"./index-5f625b61.js";import"./index-46385dca.js";const K={class:"warp"},Q={class:"search-tool"},R={class:"search-item"},W={class:"search-item"},X={class:"search-item"},Y={class:"add-row"},Z={class:"table-box"},ee=["src"],ae={class:"pager"},le={class:"edit-row"},te=t("div",{class:"edit-label"},"名字：",-1),se={class:"edit-row"},oe=t("div",{class:"edit-label"},"联系电话：",-1),ne={class:"edit-row"},ie=t("div",{class:"edit-label"},"状态：",-1),ue={class:"dialog-footer"},he={__name:"customerList",setup(de){const r=v(!1),o=v({}),h=v([{}]);let b=v(1);const i=v({mchid:"",type:"",status:"",page:1,pagenumber:10,start_time:"",end_time:""});N(()=>{m()});const V=()=>{o.value={},r.value=!0},E=async()=>{y.service();let n;o.value.id?n=await F(o.value):n=await J(o.value),n.code===200?(f({message:"操作成功！",type:"success"}),m(),r.value=!1):f({message:n.msg,type:"error"})},C=n=>{o.value=JSON.parse(JSON.stringify(n)),console.log(n.id,o.value),r.value=!0},k=n=>{i.value.pagenumber=n,i.value.page=1,m()},z=n=>{i.value.page=n,m()},U=()=>{i.value.page=1,m()},m=async()=>{const n=y.service(),l=await $(i.value);n.close(),l.code===200?(h.value=l.data.list,b.value=+l.data.count):f({message:l.msg,type:"error"})};return(n,l)=>{const g=T,c=I,w=j,_=A,u=q,x=G,L=H,S=O;return P(),B(M,null,[t("div",K,[t("div",Q,[t("div",R,[d(" 人员名字： "),a(g,{class:"search-ipt",modelValue:i.value.mchid,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value.mchid=e)},null,8,["modelValue"])]),t("div",W,[d(" 人员状态： "),a(w,{modelValue:i.value.status,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value.status=e)},{default:s(()=>[a(c,{label:"全部",value:""}),a(c,{label:"在职",value:"10"}),a(c,{label:"离职",value:"9"})]),_:1},8,["modelValue"])]),t("div",X,[a(_,{type:"primary",onClick:U},{default:s(()=>[d("搜索")]),_:1})])]),t("div",Y,[a(_,{type:"success",onClick:V},{default:s(()=>[d("新增")]),_:1})]),t("div",Z,[a(x,{data:h.value,class:"table",stripe:"","show-overflow-tooltip":"",size:"large"},{default:s(()=>[a(u,{label:"头像","min-width":"100",prop:"mchid"},{default:s(e=>[t("img",{src:e.row.avtar,alt:""},null,8,ee)]),_:1}),a(u,{label:"姓名","min-width":"130",prop:"username"}),a(u,{label:"服务客户","min-width":"180",prop:"mchkey"}),a(u,{label:"待沟通数量","min-width":"100"},{default:s(e=>[t("span",null,p(e.row.type),1)]),_:1}),a(u,{label:"沟通中数量","min-width":"100"},{default:s(e=>[t("span",null,p(e.row.type),1)]),_:1}),a(u,{label:"已预订数量","min-width":"100"},{default:s(e=>[t("span",null,p(e.row.type),1)]),_:1}),a(u,{label:"已签单数量","min-width":"100"},{default:s(e=>[t("span",null,p(e.row.type),1)]),_:1}),a(u,{label:"已完结数量","min-width":"100"},{default:s(e=>[t("span",null,p(e.row.type),1)]),_:1}),a(u,{label:"人员状态","min-width":"100"},{default:s(e=>[t("span",null,p(e.row.status==9?"在职":"离职"),1)]),_:1}),a(u,{label:"操作","min-width":"100"},{default:s(e=>[a(_,{type:"primary",plain:"",onClick:re=>C(e.row)},{default:s(()=>[d("编辑")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t("div",ae,[a(L,{"current-page":i.value.page,"onUpdate:currentPage":l[2]||(l[2]=e=>i.value.page=e),"page-size":i.value.pagenumber,"onUpdate:pageSize":l[3]||(l[3]=e=>i.value.pagenumber=e),"page-sizes":[10,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:D(b),onSizeChange:k,onCurrentChange:z},null,8,["current-page","page-size","total"])])]),a(S,{modelValue:r.value,"onUpdate:modelValue":l[8]||(l[8]=e=>r.value=e),width:"500px",title:o.value.id?`编辑：${o.value.username}`:"添加"},{footer:s(()=>[t("span",ue,[a(_,{onClick:l[7]||(l[7]=e=>r.value=!1)},{default:s(()=>[d("取消")]),_:1}),a(_,{type:"primary",onClick:E},{default:s(()=>[d(" 确定 ")]),_:1})])]),default:s(()=>[t("div",le,[te,a(g,{class:"edit-input",modelValue:o.value.username,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.username=e)},null,8,["modelValue"])]),t("div",se,[oe,a(g,{class:"edit-input",modelValue:o.value.username,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.username=e)},null,8,["modelValue"])]),t("div",ne,[ie,a(w,{class:"edit-input",modelValue:o.value.status,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.status=e)},{default:s(()=>[a(c,{label:"在职",value:"10"}),a(c,{label:"离职",value:"9"})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title"])],64)}}};export{he as default};
