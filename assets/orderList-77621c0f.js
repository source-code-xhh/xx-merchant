import{R as we,ab as Ve,ac as ye,b as te,ad as se,ae,a as R,u as oe,W as J,Z as be,o as k,k as B,r as H,n as C,l as d,_ as ne,af as ie,ag as Se,G as E,Q as Ce,a3 as de,Y as ke,c as I,ah as Ee,q as G,m as s,p as q,s as O,v as r,x as Ue,E as Y,L as l,g as $e,h as Ie,t as x,a5 as V,y as xe,ai as ze,a2 as Ne,a8 as ue,a6 as re,a7 as ce,a9 as Pe,aa as Te,H as X,I as Be}from"./index-a2058303.js";import{E as pe}from"./el-dialog-70c6c0b7.js";/* empty css                        */import{E as j,a as L}from"./el-message-e610320a.js";import{d as me,a as ve,E as De,b as Le,c as Ae}from"./index-b756546e.js";import{m as Me,e as ee,a as le}from"./merchant-ee98c8bc.js";import"./index-e0cd4e57.js";const Oe=(b,_,i)=>Ve(b.subTree).filter(t=>{var u;return ye(t)&&((u=t.type)==null?void 0:u.name)===_&&!!t.component}).map(t=>t.component.uid).map(t=>i[t]).filter(t=>!!t),We=(b,_)=>{const i={},c=we([]);return{children:c,addChild:u=>{i[u.uid]=u,c.value=Oe(b,_,i)},removeChild:u=>{delete i[u],c.value=c.value.filter(h=>h.uid!==u)}}},je=te({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),Fe={[se]:(b,_)=>[b,_].every(ae)},Ge=R({name:"ElSteps"}),He=R({...Ge,props:je,emits:Fe,setup(b,{emit:_}){const i=b,c=oe("steps"),{children:y,addChild:t,removeChild:u}=We(ie(),"ElStep");return J(y,()=>{y.value.forEach((h,v)=>{h.setIndex(v)})}),be("ElSteps",{props:i,steps:y,addStep:t,removeStep:u}),J(()=>i.active,(h,v)=>{_(se,h,v)}),(h,v)=>(k(),B("div",{class:C([d(c).b(),d(c).m(h.simple?"simple":h.direction)])},[H(h.$slots,"default")],2))}});var Je=ne(He,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const Re=te({title:{type:String,default:""},icon:{type:Se},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Ke=R({name:"ElStep"}),Qe=R({...Ke,props:Re,setup(b){const _=b,i=oe("step"),c=E(-1),y=E({}),t=E(""),u=Ce("ElSteps"),h=ie();de(()=>{J([()=>u.props.active,()=>u.props.processStatus,()=>u.props.finishStatus],([n])=>{N(n)},{immediate:!0})}),ke(()=>{u.removeStep(F.uid)});const v=I(()=>_.status||t.value),p=I(()=>{const n=u.steps.value[c.value-1];return n?n.currentStatus:"wait"}),f=I(()=>u.props.alignCenter),A=I(()=>u.props.direction==="vertical"),S=I(()=>u.props.simple),g=I(()=>u.steps.value.length),M=I(()=>{var n;return((n=u.steps.value[g.value-1])==null?void 0:n.uid)===(h==null?void 0:h.uid)}),z=I(()=>S.value?"":u.props.space),W=I(()=>[i.b(),i.is(S.value?"simple":u.props.direction),i.is("flex",M.value&&!z.value&&!f.value),i.is("center",f.value&&!A.value&&!S.value)]),m=I(()=>{const n={flexBasis:ae(z.value)?`${z.value}px`:z.value?z.value:`${100/(g.value-(f.value?0:1))}%`};return A.value||M.value&&(n.maxWidth=`${100/g.value}%`),n}),U=n=>{c.value=n},K=n=>{const e=n==="wait",w={transitionDelay:`${e?"-":""}${150*c.value}ms`},P=n===u.props.processStatus||e?0:100;w.borderWidth=P&&!S.value?"1px":0,w[u.props.direction==="vertical"?"height":"width"]=`${P}%`,y.value=w},N=n=>{n>c.value?t.value=u.props.finishStatus:n===c.value&&p.value!=="error"?t.value=u.props.processStatus:t.value="wait";const e=u.steps.value[c.value-1];e&&e.calcProgress(t.value)},F=Ee({uid:h.uid,currentStatus:v,setIndex:U,calcProgress:K});return u.addStep(F),(n,e)=>(k(),B("div",{style:q(d(m)),class:C(d(W))},[G(" icon & line "),s("div",{class:C([d(i).e("head"),d(i).is(d(v))])},[d(S)?G("v-if",!0):(k(),B("div",{key:0,class:C(d(i).e("line"))},[s("i",{class:C(d(i).e("line-inner")),style:q(y.value)},null,6)],2)),s("div",{class:C([d(i).e("icon"),d(i).is(n.icon||n.$slots.icon?"icon":"text")])},[H(n.$slots,"icon",{},()=>[n.icon?(k(),O(d(Y),{key:0,class:C(d(i).e("icon-inner"))},{default:r(()=>[(k(),O(Ue(n.icon)))]),_:1},8,["class"])):d(v)==="success"?(k(),O(d(Y),{key:1,class:C([d(i).e("icon-inner"),d(i).is("status")])},{default:r(()=>[l(d($e))]),_:1},8,["class"])):d(v)==="error"?(k(),O(d(Y),{key:2,class:C([d(i).e("icon-inner"),d(i).is("status")])},{default:r(()=>[l(d(Ie))]),_:1},8,["class"])):d(S)?G("v-if",!0):(k(),B("div",{key:3,class:C(d(i).e("icon-inner"))},x(c.value+1),3))])],2)],2),G(" title & description "),s("div",{class:C(d(i).e("main"))},[s("div",{class:C([d(i).e("title"),d(i).is(d(v))])},[H(n.$slots,"title",{},()=>[V(x(n.title),1)])],2),d(S)?(k(),B("div",{key:0,class:C(d(i).e("arrow"))},null,2)):(k(),B("div",{key:1,class:C([d(i).e("description"),d(i).is(d(v))])},[H(n.$slots,"description",{},()=>[V(x(n.description),1)])],2))],2)],6))}});var _e=ne(Qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const Ye=xe(Je,{Step:_e}),Ze=ze(_e);const he=b=>(Pe("data-v-c29b1a0f"),b=b(),Te(),b),qe=he(()=>s("span",null,"导出物料单",-1)),Xe=["onClick"],el=he(()=>s("div",{class:"total-price"},"总计："+x(1e4),-1)),ll={class:"dialog-footer"},tl={__name:"orderDetail",props:["show","orderId"],emits:["update:show"],setup(b,{emit:_}){const i=_,c=b,y=E([{mchid:"xxx"}]);J(()=>c.show,()=>{console.log(4)});const t=()=>{y.value.push({})},u=v=>{ue.confirm("确定要删除吗？").then(async()=>{y.value.splice(v,1)}).catch(()=>{})},h=async()=>{console.log(y.value);const v=j.service();setTimeout(()=>{v.close()},1e3)};return(v,p)=>{const f=Ze,A=Ye,S=re,g=me,M=ve,z=ce,W=pe;return k(),O(W,{modelValue:c.show,"onUpdate:modelValue":p[0]||(p[0]=m=>c.show=m),width:"1200px",onClose:p[1]||(p[1]=()=>i("update:show",!1)),title:"姓名-电话-的订单"},{footer:r(()=>[s("span",ll,[l(z,{type:"primary",onClick:h},{default:r(()=>[V(" 保存修改 ")]),_:1})])]),default:r(()=>[l(A,{active:1,"align-center":"","finish-status":"success"},{default:r(()=>[l(f,{title:"创建订单",description:"负责人：tel"}),l(f,{title:"确认订单",description:"负责人：tel"}),l(f,{title:"设计中",description:"负责人：tel"}),l(f,{title:"设计完成",description:""}),l(f,{title:"加工中",description:"负责人：tel"}),l(f,{title:"加工完成",description:""}),l(f,{title:"配送中",description:"负责人：tel"}),l(f,{title:"配送完成",description:""}),l(f,{title:"安装中",description:"负责人：tel"}),l(f,{title:"安装完成",description:""}),l(f,{title:"客户验收/支付尾款",description:""}),l(f,{title:"订单完成",description:""})]),_:1}),s("h3",{class:"head"},[V(" 物料单 "),s("div",null,[s("span",{onClick:t},"新增项目"),qe])]),l(M,{data:y.value,class:"table",stripe:"","show-overflow-tooltip":"",size:"large"},{default:r(()=>[l(g,{label:"项目名称","min-width":"120",prop:"mchid"},{default:r(m=>[l(S,{size:"small",modelValue:m.row.mchid,"onUpdate:modelValue":U=>m.row.mchid=U,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(g,{label:"物料名称","min-width":"120",prop:"mchid"},{default:r(m=>[l(S,{size:"small",modelValue:m.row.mchid,"onUpdate:modelValue":U=>m.row.mchid=U,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(g,{label:"物料数量","min-width":"120",prop:"mchid"},{default:r(m=>[l(S,{size:"small",modelValue:m.row.mchid,"onUpdate:modelValue":U=>m.row.mchid=U,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(g,{label:"物料单价","min-width":"120",prop:"mchid"},{default:r(m=>[l(S,{size:"small",modelValue:m.row.mchid,"onUpdate:modelValue":U=>m.row.mchid=U,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(g,{label:"价格合计","min-width":"120",prop:"mchid"},{default:r(m=>[s("span",null,x(m.row.a),1),s("span",{class:"delet",onClick:U=>u(m.index)},"删除",8,Xe)]),_:1})]),_:1},8,["data"]),el]),_:1},8,["modelValue"])}}},sl=Ne(tl,[["__scopeId","data-v-c29b1a0f"]]),al={class:"warp"},ol={class:"search-tool"},nl={class:"search-item"},il={class:"search-item"},dl={class:"search-item"},ul={class:"search-item"},rl={class:"search-item"},cl={class:"add-row"},pl={class:"table-box"},ml=s("div",null,"总金额："+x(1),-1),vl=s("div",null,"定金："+x(1),-1),_l=s("div",null,"预付金："+x(1),-1),hl=s("div",null,"尾款："+x(1),-1),fl={class:"pager"},gl={class:"edit-row"},wl=s("div",{class:"edit-label"},"客户姓名：",-1),Vl={class:"edit-row"},yl=s("div",{class:"edit-label"},"客户性别：",-1),bl={class:"edit-row"},Sl=s("div",{class:"edit-label"},"客户电话：",-1),Cl={class:"edit-row"},kl=s("div",{class:"edit-label"},"房屋地址：",-1),El={class:"edit-row"},Ul=s("div",{class:"edit-label"},"房屋面积：",-1),$l={class:"edit-row"},Il=s("div",{class:"edit-label"},"定金金额：",-1),xl={class:"edit-row"},zl=s("div",{class:"edit-label"},"订单总额：",-1),Nl={class:"edit-row"},Pl=s("div",{class:"edit-label"},"预缴金额：",-1),Tl={class:"edit-row"},Bl=s("div",{class:"edit-label"},"尾款金额：",-1),Dl={class:"dialog-footer"},Ll={class:"edit-row"},Al=s("div",{class:"edit-label"},"选择员工：",-1),Ml={class:"dialog-footer"},Rl={__name:"orderList",setup(b){const _=E(!1),i=E(""),c=E(!1),y=E(!1),t=E({}),u=E([{}]);let h=E(1);const v=E([{name:"新订单",value:""},{name:"已确认",value:""},{name:"设计中",value:""},{name:"设计完成",value:""},{name:"加工中",value:""},{name:"加工完成",value:""},{name:"物流运输中",value:""},{name:"运输完成",value:""},{name:"安装中",value:""},{name:"已完成",value:""}]),p=E({mchid:"",type:"",status:"",page:1,pagenumber:10,start_time:"",end_time:""}),f=n=>{c.value=!0,t.value=n};de(()=>{N()});const A=()=>{t.value={},_.value=!0};let S;const g=async()=>{clearTimeout(S),S=setTimeout(async()=>{await a},350)},M=async()=>{const n=j.service();let e;t.value.id?e=await ee(t.value):e=await le(t.value),n.close(),e.code===200?(L({message:"操作成功！",type:"success"}),N(),c.value=!1):L({message:e.msg,type:"error"})},z=async()=>{const n=j.service();let e;t.value.id?e=await ee(t.value):e=await le(t.value),n.close(),e.code===200?(L({message:"操作成功！",type:"success"}),N(),_.value=!1):L({message:e.msg,type:"error"})},W=n=>{t.value=JSON.parse(JSON.stringify(n)),console.log(n.id,t.value),_.value=!0},m=n=>{p.value.pagenumber=n,p.value.page=1,N()},U=n=>{p.value.page=n,N()},K=()=>{p.value.page=1,N()},N=async()=>{const n=j.service(),e=await Me(p.value);n.close(),e.code===200?(u.value=e.data.list,h.value=+e.data.count):L({message:e.msg,type:"error"})},F=n=>{ue.confirm(`确定要删除【${n.username}】的订单吗？`).then(async()=>{const e=j.service(),w=await delAdminApi({id:n.id});e.close(),w.code===200?(L({message:"操作成功！",type:"success"}),N()):L({message:w.msg,type:"error"})}).catch(()=>{})};return(n,e)=>{const w=re,P=Ae,Q=De,$=ce,T=me,fe=ve,ge=Le,Z=pe;return k(),B(X,null,[s("div",al,[s("div",ol,[s("div",nl,[V(" 订单号： "),l(w,{class:"search-ipt",modelValue:p.value.mchid,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value.mchid=o)},null,8,["modelValue"])]),s("div",il,[V(" 客户姓名： "),l(w,{class:"search-ipt",modelValue:p.value.mchid,"onUpdate:modelValue":e[1]||(e[1]=o=>p.value.mchid=o)},null,8,["modelValue"])]),s("div",dl,[V(" 客户电话： "),l(w,{class:"search-ipt",modelValue:p.value.mchid,"onUpdate:modelValue":e[2]||(e[2]=o=>p.value.mchid=o)},null,8,["modelValue"])]),s("div",ul,[V(" 订单状态： "),l(Q,{modelValue:p.value.status,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value.status=o)},{default:r(()=>[l(P,{label:"全部",value:""}),(k(!0),B(X,null,Be(v.value,(o,D)=>(k(),O(P,{key:D,label:o.name,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",rl,[l($,{type:"primary",onClick:K},{default:r(()=>[V("搜索")]),_:1})])]),s("div",cl,[l($,{type:"success",onClick:A},{default:r(()=>[V("新增")]),_:1})]),s("div",pl,[l(fe,{data:u.value,class:"table",stripe:"","show-overflow-tooltip":"",size:"large"},{default:r(()=>[l(T,{label:"订单号","min-width":"120",prop:"mchid"}),l(T,{label:"客户姓名","min-width":"130",prop:"username"}),l(T,{label:"客户电话","min-width":"150",prop:"mchkey"}),l(T,{label:"当前处理人","min-width":"120",prop:"mchkey"}),l(T,{label:"客户经理","min-width":"120",prop:"mchkey"}),l(T,{label:"订单金额","min-width":"120"},{default:r(o=>[ml,vl,_l,hl]),_:1}),l(T,{label:"订单状态","min-width":"80"},{default:r(o=>[s("span",null,x(v.value.filter(D=>D.status==o.row.status)[0].name),1)]),_:1}),l(T,{label:"操作","min-width":"360",fixed:"right"},{default:r(o=>[l($,{plain:"",onClick:e[4]||(e[4]=D=>y.value=!0)},{default:r(()=>[V("详情编辑")]),_:1}),l($,{type:"primary",plain:"",onClick:D=>W(o.row)},{default:r(()=>[V("基础编辑")]),_:2},1032,["onClick"]),l($,{type:"warning",plain:"",onClick:D=>f(o.row)},{default:r(()=>[V("指派")]),_:2},1032,["onClick"]),l($,{type:"danger",plain:"",onClick:D=>F(o.row)},{default:r(()=>[V("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),s("div",fl,[l(ge,{"current-page":p.value.page,"onUpdate:currentPage":e[5]||(e[5]=o=>p.value.page=o),"page-size":p.value.pagenumber,"onUpdate:pageSize":e[6]||(e[6]=o=>p.value.pagenumber=o),"page-sizes":[10,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:d(h),onSizeChange:m,onCurrentChange:U},null,8,["current-page","page-size","total"])])]),l(Z,{modelValue:_.value,"onUpdate:modelValue":e[17]||(e[17]=o=>_.value=o),width:"500px",title:t.value.id?`客户：${t.value.username}的订单`:"添加"},{footer:r(()=>[s("span",Dl,[l($,{onClick:e[16]||(e[16]=o=>_.value=!1)},{default:r(()=>[V("取消")]),_:1}),l($,{type:"primary",onClick:z},{default:r(()=>[V(" 确定 ")]),_:1})])]),default:r(()=>[s("div",gl,[wl,l(w,{class:"edit-input",placeholder:"输入客户姓名自动查询",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",Vl,[yl,l(Q,{class:"edit-input",modelValue:p.value.status,"onUpdate:modelValue":e[8]||(e[8]=o=>p.value.status=o)},{default:r(()=>[l(P,{label:"男",value:""}),l(P,{label:"女",value:""})]),_:1},8,["modelValue"])]),s("div",bl,[Sl,l(w,{class:"edit-input",placeholder:"输入客户电话",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",Cl,[kl,l(w,{class:"edit-input",placeholder:"输入客户房屋地址",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",El,[Ul,l(w,{class:"edit-input",placeholder:"输入客户房屋面积",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",$l,[Il,l(w,{class:"edit-input",placeholder:"输入定金金额",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[12]||(e[12]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",xl,[zl,l(w,{class:"edit-input",placeholder:"输入订单总额",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[13]||(e[13]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",Nl,[Pl,l(w,{class:"edit-input",placeholder:"输入预缴金额",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[14]||(e[14]=o=>t.value.username=o)},null,8,["modelValue"])]),s("div",Tl,[Bl,l(w,{class:"edit-input",placeholder:"输入尾款金额",onInput:g,modelValue:t.value.username,"onUpdate:modelValue":e[15]||(e[15]=o=>t.value.username=o)},null,8,["modelValue"])])]),_:1},8,["modelValue","title"]),l(sl,{show:y.value,"onUpdate:show":e[18]||(e[18]=o=>y.value=o),orderId:t.value.id},null,8,["show","orderId"]),l(Z,{modelValue:c.value,"onUpdate:modelValue":e[21]||(e[21]=o=>c.value=o),width:"500px",title:"指派"},{footer:r(()=>[s("span",Ml,[l($,{onClick:e[20]||(e[20]=o=>c.value=!1)},{default:r(()=>[V("取消")]),_:1}),l($,{type:"primary",onClick:M},{default:r(()=>[V(" 确定 ")]),_:1})])]),default:r(()=>[s("div",Ll,[Al,l(Q,{class:"edit-input",modelValue:i.value,"onUpdate:modelValue":e[19]||(e[19]=o=>i.value=o)},{default:r(()=>[l(P,{label:"11",value:""}),l(P,{label:"22",value:""})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])],64)}}};export{Rl as default};
