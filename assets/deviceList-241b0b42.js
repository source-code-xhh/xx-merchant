import{G as p,a3 as I,o as c,k as V,m as t,a5 as r,L as l,v as n,l as J,H as h,a6 as j,a7 as G,I as k,t as S,a8 as H,s as C}from"./index-f963a964.js";import{E as K}from"./el-dialog-e37cfe82.js";/* empty css                        */import{E as U,a as f}from"./el-message-c1f6612d.js";import{m as Q,e as R,a as W}from"./merchant-b27dae52.js";import{E as X,a as Y,b as Z,c as q,d as ee}from"./index-5f625b61.js";import"./index-46385dca.js";const ae={class:"warp"},le={class:"search-tool"},te={class:"search-item"},se={class:"search-item"},oe={class:"search-item"},ne={class:"add-row"},ie={class:"table-box"},ue={class:"pager"},de={class:"edit-row"},re=t("div",{class:"edit-label"},"设备编号：",-1),me={class:"edit-row"},pe=t("div",{class:"edit-label"},"设备型号：",-1),ce={class:"edit-row"},ve=t("div",{class:"edit-label"},"服役日期：",-1),_e={class:"edit-row"},ge=t("div",{class:"edit-label"},"设备产能：",-1),fe={class:"edit-row"},be=t("div",{class:"edit-label"},"设备类型：",-1),Ve={class:"edit-row"},he=t("div",{class:"edit-label"},"设备状态：",-1),we={class:"dialog-footer"},Se={__name:"deviceList",setup(ye){const x=p([{name:"type1",value:1},{name:"type2",value:2}]),w=p([{name:"服役",value:1},{name:"故障",value:1},{name:"闲置",value:1},{name:"报废",value:1},{name:"淘汰",value:1}]),v=p(!1),s=p({}),z=p([{}]);let L=p(1);const i=p({mchid:"",type:"",status:"",page:1,pagenumber:10,start_time:"",end_time:""});I(()=>{_()});const B=()=>{s.value={},v.value=!0},A=async()=>{U.service();let o;s.value.id?o=await R(s.value):o=await W(s.value),o.code===200?(f({message:"操作成功！",type:"success"}),_(),v.value=!1):f({message:o.msg,type:"error"})},M=o=>{s.value=JSON.parse(JSON.stringify(o)),console.log(o.id,s.value),v.value=!0},N=o=>{i.value.pagenumber=o,i.value.page=1,_()},O=o=>{i.value.page=o,_()},P=()=>{i.value.page=1,_()},_=async()=>{const o=U.service(),a=await Q(i.value);o.close(),a.code===200?(z.value=a.data.list,L.value=+a.data.count):f({message:a.msg,type:"error"})},T=o=>{H.confirm(`确定要删除设备【${o.username}】吗？`).then(async()=>{const a=U.service(),d=await delAdminApi({id:o.id});a.close(),d.code===200?(f({message:"操作成功！",type:"success"}),_()):f({message:d.msg,type:"error"})}).catch(()=>{})};return(o,a)=>{const d=j,b=q,y=X,g=G,m=ee,$=Y,D=Z,F=K;return c(),V(h,null,[t("div",ae,[t("div",le,[t("div",te,[r(" 设备编号： "),l(d,{class:"search-ipt",modelValue:i.value.mchid,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value.mchid=e)},null,8,["modelValue"])]),t("div",se,[r(" 设备状态： "),l(y,{modelValue:i.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value.status=e)},{default:n(()=>[l(b,{label:"全部",value:""}),(c(!0),V(h,null,k(w.value,(e,u)=>(c(),C(b,{key:u,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",oe,[l(g,{type:"primary",onClick:P},{default:n(()=>[r("搜索")]),_:1})])]),t("div",ne,[l(g,{type:"success",onClick:B},{default:n(()=>[r("新增")]),_:1})]),t("div",ie,[l($,{data:z.value,class:"table",stripe:"","show-overflow-tooltip":"",size:"large"},{default:n(()=>[l(m,{label:"设备编号","min-width":"150",prop:"mchid"}),l(m,{label:"设备型号","min-width":"130",prop:"username"}),l(m,{label:"设备类型","min-width":"100"},{default:n(e=>{var u;return[t("span",null,S((u=x.value.filter(E=>E.value==e.row.type)[0])==null?void 0:u.name),1)]}),_:1}),l(m,{label:"服役日期","min-width":"150",prop:"username"}),l(m,{label:"参能","min-width":"100",prop:"username"}),l(m,{label:"设备状态","min-width":"80"},{default:n(e=>{var u;return[t("span",null,S((u=w.value.filter(E=>E.value==e.row.status)[0])==null?void 0:u.name),1)]}),_:1}),l(m,{label:"操作","min-width":"170"},{default:n(e=>[l(g,{type:"primary",plain:"",onClick:u=>M(e.row)},{default:n(()=>[r("编辑")]),_:2},1032,["onClick"]),l(g,{type:"danger",plain:"",onClick:u=>T(e.row)},{default:n(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),t("div",ue,[l(D,{"current-page":i.value.page,"onUpdate:currentPage":a[2]||(a[2]=e=>i.value.page=e),"page-size":i.value.pagenumber,"onUpdate:pageSize":a[3]||(a[3]=e=>i.value.pagenumber=e),"page-sizes":[10,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:J(L),onSizeChange:N,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),l(F,{modelValue:v.value,"onUpdate:modelValue":a[11]||(a[11]=e=>v.value=e),width:"500px",title:s.value.id?`商户：${s.value.username}`:"添加"},{footer:n(()=>[t("span",we,[l(g,{onClick:a[10]||(a[10]=e=>v.value=!1)},{default:n(()=>[r("取消")]),_:1}),l(g,{type:"primary",onClick:A},{default:n(()=>[r(" 确定 ")]),_:1})])]),default:n(()=>[t("div",de,[re,l(d,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.username=e)},null,8,["modelValue"])]),t("div",me,[pe,l(d,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":a[5]||(a[5]=e=>s.value.username=e)},null,8,["modelValue"])]),t("div",ce,[ve,l(d,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value.username=e)},null,8,["modelValue"])]),t("div",_e,[ge,l(d,{class:"edit-input",modelValue:s.value.username,"onUpdate:modelValue":a[7]||(a[7]=e=>s.value.username=e)},null,8,["modelValue"])]),t("template",null,[t("div",fe,[be,l(y,{class:"edit-input",modelValue:s.value.type,"onUpdate:modelValue":a[8]||(a[8]=e=>s.value.type=e)},{default:n(()=>[(c(!0),V(h,null,k(x.value,(e,u)=>(c(),C(b,{key:u,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),t("div",Ve,[he,l(y,{class:"edit-input",modelValue:s.value.status,"onUpdate:modelValue":a[9]||(a[9]=e=>s.value.status=e)},{default:n(()=>[(c(!0),V(h,null,k(w.value,(e,u)=>(c(),C(b,{key:u,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])]),_:1},8,["modelValue","title"])],64)}}};export{Se as default};
